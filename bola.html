<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>Exemplo com bola em movimento</title>
	<script type="text/javascript" src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
	<script type="text/javascript">
		/*Logo quando a página é carregada, é executada a função abaixo*/
		window.onload =  function(){
				/*
					Inicialmente, é feita uma instanciação do objeto contexto, que é responsável pela animação em CANVAS
				*/
				
				var elemento = document.getElementById("cont");
				var contexto = elemento.getContext("2d");
				if(contexto){
					var Bola = function(x,y,r,vX,vY){
						this.x = x;
						this.y = y;
						this.vX = vX;
						this.vY = vY;
						this.r = r;
						this.dX = 0;
						this.dY = 0;
						
						this.update = function(){
							this.x += this.vX;
							this.y += this.vY;
						};
						
						this.checaColisao = function(){
							if((this.x + this.r) >= larguraTela){
								this.vX *= -1;
							}else if((this.x - this.r) < 0){
								this.vX *= -1;
							}
							if((this.y + this.r) >= alturaTela){
								this.vY *= -1;
							}else if((this.y - this.r) < 0){
								this.vY *= -1;
							}	
						}
						
						this.setaDestinoX = function(x){
							this.dX = x;
						}
						

						this.setaDestinoY = function(y){
							this.dY = y;
						}
						
						this.checaDestino = function(){
							
							
						}
					}
					
					var alturaTela = elemento.height;
					var larguraTela = elemento.width;
					var x = Math.floor((Math.random()*larguraTela)+1);	
					var y = Math.floor((Math.random()*alturaTela)+1);
					var r = 10;
					var vX = 5;
					var vY = 5;
					var bola = new Bola(x,y,r,vX,vY);
					var eu = new Bola(Math.floor((Math.random()*larguraTela)+1),Math.floor((Math.random()*alturaTela)+1),r,vX,vY);
					
					var bolas  = new Array();
					bolas.push(bola);
					bolas.push(eu);
					
					desenha();
					animate();
				}else{
					console.log("Não funciona de jeito nenhum");
				}
			
			function desenha(){
				contexto.clearRect(0,0,larguraTela,alturaTela);
				contexto.fillStyle="#FF0000";
				contexto.beginPath();
				contexto.moveTo(bola.x,bola.y);
				contexto.arc(bola.x,bola.y,bola.r,0,Math.PI*2);
				contexto.closePath();
				contexto.fill();
				
				contexto.fillStyle="#0000FF";
				contexto.beginPath();
				contexto.moveTo(eu.x,eu.y);
				contexto.arc(eu.x,eu.y,eu.r,0,Math.PI*2);
				contexto.closePath();
				contexto.fill();
			}
			
			function animate(){
				bola.checaColisao();
				bola.update();
				
				
				eu.checaColisao();
				//eu.checaDestino();
				//eu.update();
				
				desenha();
				setTimeout(animate,30);
			}
			
			elemento.onclick = function(e){
				var pX;
				var pY;
				pX = e.pageX - this.offsetLeft;
				pY = e.pageY - this.offsetTop;
				eu.setaDestinoX(pX);
				eu.setaDestinoY(pY);
				
			}
			
	 	}
		


	</script>
	<style>
		body,html{
			background-color: #000000;
		}
		h1{
			color: #FFFFFF;
		}
		canvas{
			background-color: #FFFFFF;
		}
	</style>
</head>
<body>
	<h1>TESTES</h1>
	<canvas id = "cont" width="600" height="600">Seu navegador não suporta canvas</canvas>
</body>
</html>